{"ast":null,"code":"","map":{"version":3,"sources":[],"names":[],"mappings":"","sourcesContent":["/*import React from 'react';\nimport {SetState, Ref, hash, waitForAjaxCall} from './Utilities';\n\nimport { MainNav } from '../types';\nimport { useNavigation } from '@react-navigation/native';\n\nfunction SignupPage(){\n    const navigation = useNavigation();\n    let formRef: Ref<HTMLFormElement|null> = React.useRef(null);\n\n    const validate = (): boolean => {\n        let form = formRef.current!;\n        if (form.password.value !== form.password2.value){\n            form.password2.setCustomValidity(\"passwords must match.\");\n        } else {\n            form.password2.setCustomValidity('');\n        }\n        return form.password.value !== form.password2.value;\n    }\n\n    const signup = async (e: React.FormEvent): Promise<boolean> => {\n        e.preventDefault();\n\n        let form = formRef.current!;\n        let passwordHashed = await hash(form.password.value);\n        try {\n            await waitForAjaxCall('put', `\n                /register/${form.username.value}\n                /nickname/${form.nickname.value}\n                /password/${passwordHashed}\n            `);\n            alert(\"register successful!\");\n            navigation.navigate(MainNav.LoginPage);\n        } catch {\n            alert(\"register failed.\");\n        }\n\n        return false;\n    }\n\n    return <form id='signupPage' onSubmit={signup} method='post' className='col centerCross' ref={formRef}>\n        <h1>Signup</h1>\n\n        <label htmlFor='username'>username</label>\n        <input name='username' type=\"text\" pattern=\"[\\dA-z_]{1,20}\" title=\"Alphanumeric and underscores.\" required></input>\n\n        <label htmlFor='nickname'>nickname</label>\n        <input name='nickname' type=\"text\" pattern=\"[\\dA-z_ ]+\" title=\"Alphanumeric, underscores and spaces.\" required></input>\n\n        <label htmlFor='password'>password</label>\n        <input name='password' type='password' required></input>\n\n        <label htmlFor='password2'>retype password</label>\n        <input name='password2' type='password' required></input>\n\n        <div className='spacer'></div>\n\n        <div id='buttons' className=\"row center\">\n            <button id='back' type=\"button\" onClick={() => navigation.navigate(MainNav.FrontPage)}>back</button>\n            <button onClick={validate} id='signup' type=\"submit\">signup</button>\n        </div>\n\n    </form>;\n}\n\nexport default SignupPage;*/"]},"metadata":{},"sourceType":"script"}