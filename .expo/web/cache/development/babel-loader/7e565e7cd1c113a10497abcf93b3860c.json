{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport UserObject from \"./UserObject\";\nimport axios from 'axios';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nexport var isMobile = function isMobile() {\n  var dim = Dimensions.get('window');\n  return dim.height >= dim.width;\n};\nexport function arrayBufferToHex(arrayBuffer) {\n  var intArray = new Uint8Array(arrayBuffer),\n      hashArray = Array.from(intArray),\n      hashHex = hashArray.map(function (b) {\n    return b.toString(16).padStart(2, '0');\n  }).join('');\n  return hashHex;\n}\nexport function hash(toHash) {\n  var hashEnc, hashBuffer, keyHex;\n  return _regeneratorRuntime.async(function hash$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          hashEnc = new TextEncoder().encode(toHash);\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(crypto.subtle.digest('SHA-512', hashEnc));\n\n        case 3:\n          hashBuffer = _context.sent;\n          keyHex = arrayBufferToHex(hashBuffer);\n          return _context.abrupt(\"return\", keyHex);\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function waitForAjaxCall(method, url) {\n  return _regeneratorRuntime.async(function waitForAjaxCall$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          url = url.replace(/[ \\t\\n]/g, '');\n          return _context3.abrupt(\"return\", new Promise(function _callee(resolve, reject) {\n            var axiosFunc, response;\n            return _regeneratorRuntime.async(function _callee$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.prev = 0;\n                    _context2.t0 = method;\n                    _context2.next = _context2.t0 === 'post' ? 4 : _context2.t0 === 'get' ? 6 : _context2.t0 === 'put' ? 8 : 10;\n                    break;\n\n                  case 4:\n                    axiosFunc = axios.post;\n                    return _context2.abrupt(\"break\", 10);\n\n                  case 6:\n                    axiosFunc = axios.get;\n                    return _context2.abrupt(\"break\", 10);\n\n                  case 8:\n                    axiosFunc = axios.put;\n                    return _context2.abrupt(\"break\", 10);\n\n                  case 10:\n                    _context2.next = 12;\n                    return _regeneratorRuntime.awrap(axiosFunc(process.env.PUBLIC_URL + \"/\" + url));\n\n                  case 12:\n                    response = _context2.sent;\n                    resolve(response.data);\n                    _context2.next = 20;\n                    break;\n\n                  case 16:\n                    _context2.prev = 16;\n                    _context2.t1 = _context2[\"catch\"](0);\n                    console.log('axios error:', _context2.t1);\n                    reject(_context2.t1);\n\n                  case 20:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, null, null, [[0, 16]], Promise);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function messageStrToJSON(messageStr) {\n  var message = JSON.parse(messageStr);\n\n  if (message.error != null) {\n    throw new Error(message.error);\n  }\n\n  return message;\n}\nexport var avg = function avg(x1, x2) {\n  var x = ((parseFloat(x1) + parseFloat(x2)) / 2).toFixed(1);\n  return isNaN(x) ? \"?\" : x;\n};\nexport var hasAttributes = function hasAttributes(obj, attrs) {\n  return attrs.every(function (a) {\n    return obj[a] != undefined;\n  });\n};\nexport var getRatingsGetIsMore = function getRatingsGetIsMore(filter, subFilter, range, rangeStart, searchTerm) {\n  var _await$waitForAjaxCal, ratings, isMore;\n\n  return _regeneratorRuntime.async(function getRatingsGetIsMore$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return _regeneratorRuntime.awrap(waitForAjaxCall('get', \"\\n        /ratings/\" + UserObject.getUsername() + \"\\n        /password/\" + UserObject.getPassword() + \"\\n        /filter/\" + filter.replace(/ /g, '') + \"\\n        /subFilter/\" + subFilter.replace(/ /g, '') + \"\\n        /range/\" + range + \"\\n        /rangeStart/\" + rangeStart + \"\\n        /search/\" + searchTerm + \"\\n    \"));\n\n        case 2:\n          _await$waitForAjaxCal = _context4.sent;\n          ratings = _await$waitForAjaxCal.ratings;\n          isMore = _await$waitForAjaxCal.isMore;\n          return _context4.abrupt(\"return\", {\n            ratings: ratings,\n            isMore: isMore\n          });\n\n        case 6:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":{"version":3,"sources":["/Users/alex/myGithub/findingNameo_native/components/Utilities.tsx"],"names":["UserObject","axios","isMobile","dim","Dimensions","get","height","width","arrayBufferToHex","arrayBuffer","intArray","Uint8Array","hashArray","Array","from","hashHex","map","b","toString","padStart","join","hash","toHash","hashEnc","TextEncoder","encode","crypto","subtle","digest","hashBuffer","keyHex","waitForAjaxCall","method","url","replace","Promise","resolve","reject","axiosFunc","post","put","process","env","PUBLIC_URL","response","data","console","log","messageStrToJSON","messageStr","message","JSON","parse","error","Error","avg","x1","x2","x","parseFloat","toFixed","isNaN","hasAttributes","obj","attrs","every","a","undefined","getRatingsGetIsMore","filter","subFilter","range","rangeStart","searchTerm","getUsername","getPassword","ratings","isMore"],"mappings":"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","sourcesContent":["import UserObject from './UserObject';\nimport axios from 'axios';\nimport {Rate} from './Ratings'\n\nimport { Dimensions } from 'react-native';\nimport React from 'react';\n\nexport var isMobile = () => {\n    let dim = Dimensions.get('window');\n    return dim.height >= dim.width;\n};\n\nexport type SetState<T> = React.Dispatch<React.SetStateAction<T>>;\nexport type Ref<T> = React.MutableRefObject<T>;\nexport type Dispatch<T> = React.Dispatch<T>;\n\nexport function arrayBufferToHex(arrayBuffer: ArrayBuffer){\n    let intArray = new Uint8Array(arrayBuffer),\n        hashArray = Array.from(intArray),\n        hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n\n    return hashHex;\n}\n\nexport async function hash(toHash: string){\n    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest\n    let hashEnc = new TextEncoder().encode(toHash),                        \t\t\t\t  \n        hashBuffer = await crypto.subtle.digest('SHA-512', hashEnc),\n        keyHex = arrayBufferToHex(hashBuffer);\n\n    return keyHex;\n}\n\nexport async function waitForAjaxCall(method: 'post' | 'get' | 'put', url: string): Promise<any> {\n\turl = url.replace(/[ \\t\\n]/g, ''); // get rid of empty spaces and newlines\n\n\treturn new Promise(async (resolve, reject) =>{\n\t\ttry {\n            let axiosFunc: (url: string) => any;\n            switch(method){\n                case 'post':\n                    axiosFunc = axios.post;\n                    break;\n                case 'get':\n                    axiosFunc = axios.get;\n                    break;\n                case 'put':\n                    axiosFunc = axios.put;\n                    break;\n            }\n\n\t\t\tvar response = await axiosFunc(`${process.env.PUBLIC_URL}/${url}`);\n\t\t\tresolve(response.data);\n\t\t} catch (error) {\n\t\t\tconsole.log('axios error:', error);\n\t\t\treject(error);\n\t\t}\n\t});\n}\n\nexport function messageStrToJSON(messageStr: string){\n\tlet message = JSON.parse(messageStr);\n\tif (message.error != null){\n\t\tthrow new Error(message.error);\n\t}\n\treturn message;\n}\n\nexport const avg = (x1: any, x2: any) => {\n    let x = ((parseFloat(x1)+parseFloat(x2))/2).toFixed(1);\n    return isNaN(x as any) ? \"?\" : x;\n};\n\n\nexport interface PageState {\n    pageName: string;\n    element: JSX.Element|null;\n}\n\nexport interface PageAction{\n    type: string;\n    pageName: string;\n    element?: JSX.Element\n}\n\nexport const hasAttributes = (obj: Object, attrs: string[]): boolean => {\n    return attrs.every((a) => (obj as {[key: string]: any})[a] != undefined);\n}\n\n\nexport const getRatingsGetIsMore = async (filter: string, subFilter: string, range: number, rangeStart: number, searchTerm: string): Promise<{ratings: Rate[], isMore: boolean}> => {\n        \n    let {ratings, isMore}: {ratings: Rate[], isMore: boolean} = await waitForAjaxCall('get', `\n        /ratings/${UserObject.getUsername()}\n        /password/${UserObject.getPassword()}\n        /filter/${filter.replace(/ /g, '')}\n        /subFilter/${subFilter.replace(/ /g, '')}\n        /range/${range}\n        /rangeStart/${rangeStart}\n        /search/${searchTerm}\n    `);\n    return {ratings: ratings, isMore: isMore}\n\n}"]},"metadata":{},"sourceType":"module"}